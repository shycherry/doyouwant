<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-ripple/paper-ripple.html">

<dom-module name="dyw-cesarheart">
  <style type='text/css'>

    #warped {position: relative; display: block; width:583px; height:586px;}

    #warped>span[id^=w]:nth-of-type(n+0){display:block; position:absolute; transform-origin:50% 100%; }

    #warped span{font-family:'Freestyle Script';font-size:38px;font-weight:normal;font-style:normal;
    line-height:0.55; white-space:pre; overflow:visible; padding:0px;}

    #warped * {transition : all, 1s;}

    #warped.heart #w0 {text-transform: uppercase; transform: rotate(-8.89rad); width: 17px; height: 20px; left: 236.1px; top: 421.15px;}
    #warped.heart #w1 {text-transform: uppercase; transform: rotate(-8.82rad); width: 12px; height: 20px; left: 217.29px; top: 407.23px;}
    #warped.heart #w2 {text-transform: uppercase; transform: rotate(-8.75rad); width: 10px; height: 20px; left: 200.15px; top: 393.48px;}
    #warped.heart #w3 {text-transform: uppercase; transform: rotate(-8.67rad); width: 14px; height: 20px; left: 179.65px; top: 377.22px;}
    #warped.heart #w4 {text-transform: uppercase; transform: rotate(-8.59rad); width: 10px; height: 20px; left: 165.29px; top: 360.36px;}
    #warped.heart #w5 {text-transform: uppercase; transform: rotate(-8.51rad); width: 10px; height: 20px; left: 150.96px; top: 343.06px;}
    #warped.heart #w6 {text-transform: uppercase; transform: rotate(-8.43rad); width: 10px; height: 20px; left: 138.61px; top: 325.47px;}
    #warped.heart #w7 {text-transform: uppercase; transform: rotate(-8.36rad); width: 5px; height: 20px; left: 131.21px; top: 308.78px;}
    #warped.heart #w8 {text-transform: uppercase; transform: rotate(-8.28rad); width: 10px; height: 20px; left: 119.95px; top: 291.05px;}
    #warped.heart #w9 {text-transform: uppercase; transform: rotate(-8.2rad); width: 5px; height: 20px; left: 115.43px; top: 273.45px;}
    #warped.heart #w10 {text-transform: uppercase; transform: rotate(-8.11rad); width: 10px; height: 20px; left: 107.05px; top: 254.13px;}
    #warped.heart #w11 {text-transform: uppercase; transform: rotate(-8.01rad); width: 10px; height: 20px; left: 102.67px; top: 232.48px;}
    #warped.heart #w12 {text-transform: uppercase; transform: rotate(-7.89rad); width: 10px; height: 20px; left: 100.73px; top: 211px;}
    #warped.heart #w13 {text-transform: uppercase; transform: rotate(-7.76rad); width: 10px; height: 20px; left: 101.44px; top: 189.42px;}
    #warped.heart #w14 {text-transform: uppercase; transform: rotate(-7.58rad); width: 10px; height: 20px; left: 105.62px; top: 167.28px;}
    #warped.heart #w15 {text-transform: uppercase; transform: rotate(-7.35rad); width: 8px; height: 20px; left: 114.36px; top: 148.41px;}
    #warped.heart #w16 {text-transform: uppercase; transform: rotate(-7.01rad); width: 5px; height: 20px; left: 127.44px; top: 133.69px;}
    #warped.heart #w17 {text-transform: uppercase; transform: rotate(-6.49rad); width: 10px; height: 20px; left: 141.96px; top: 124.89px;}
    #warped.heart #w18 {text-transform: uppercase; transform: rotate(-5.98rad); width: 5px; height: 20px; left: 164px; top: 126.19px;}
    #warped.heart #w19 {text-transform: uppercase; transform: rotate(-5.65rad); width: 14px; height: 20px; left: 178.12px; top: 136.17px;}
    #warped.heart #w20 {text-transform: uppercase; transform: rotate(-5.44rad); width: 10px; height: 20px; left: 197.94px; top: 153.02px;}
    #warped.heart #w21 {text-transform: uppercase; transform: rotate(-5.32rad); width: 10px; height: 20px; left: 211.05px; top: 169.98px;}
    #warped.heart #w22 {text-transform: uppercase; transform: rotate(-7.11rad); width: 9px; height: 20px; left: 224.59px; top: 187.8px;}
    #warped.heart #w23 {text-transform: uppercase; transform: rotate(-7.07rad); width: 10px; height: 20px; left: 239.03px; top: 172.26px;}
    #warped.heart #w24 {text-transform: uppercase; transform: rotate(-7.01rad); width: 10px; height: 20px; left: 255.17px; top: 157.14px;}
    #warped.heart #w25 {text-transform: uppercase; transform: rotate(-6.93rad); width: 9px; height: 20px; left: 272.6px; top: 143.37px;}
    #warped.heart #w26 {text-transform: uppercase; transform: rotate(-6.82rad); width: 8px; height: 20px; left: 289.54px; top: 132.42px;}
    #warped.heart #w27 {text-transform: uppercase; transform: rotate(-6.62rad); width: 10px; height: 20px; left: 307.89px; top: 123.32px;}
    #warped.heart #w28 {text-transform: uppercase; transform: rotate(-6.2rad); width: 11px; height: 20px; left: 329.42px; top: 120.01px;}
    #warped.heart #w29 {text-transform: uppercase; transform: rotate(-5.53rad); width: 9px; height: 20px; left: 350.17px; top: 128.66px;}
    #warped.heart #w30 {text-transform: uppercase; transform: rotate(-5.05rad); width: 10px; height: 20px; left: 360.85px; top: 147.02px;}
    #warped.heart #w31 {text-transform: uppercase; transform: rotate(-4.81rad); width: 8px; height: 20px; left: 366.06px; top: 167.58px;}
    #warped.heart #w32 {text-transform: uppercase; transform: rotate(-10.95rad); width: 10px; height: 20px; left: 365.42px; top: 188.22px;}
    #warped.heart #w33 {text-transform: uppercase; transform: rotate(-10.85rad); width: 8px; height: 20px; left: 364.22px; top: 209.72px;}
    #warped.heart #w34 {text-transform: uppercase; transform: rotate(-10.78rad); width: 9px; height: 20px; left: 359.83px; top: 230.07px;}
    #warped.heart #w35 {text-transform: uppercase; transform: rotate(-10.71rad); width: 11px; height: 20px; left: 353.41px; top: 250.72px;}
    #warped.heart #w36 {text-transform: uppercase; transform: rotate(-10.66rad); width: 9px; height: 20px; left: 347.72px; top: 271.3px;}
    #warped.heart #w37 {text-transform: uppercase; transform: rotate(-10.61rad); width: 10px; height: 20px; left: 339.51px; top: 291.53px;}
    #warped.heart #w38 {text-transform: uppercase; transform: rotate(-10.57rad); width: 10px; height: 20px; left: 330.41px; top: 312.49px;}
    #warped.heart #w39 {text-transform: uppercase; transform: rotate(-10.53rad); width: 10px; height: 20px; left: 321.28px; top: 331.34px;}
    #warped.heart #w40 {text-transform: uppercase; transform: rotate(-10.49rad); width: 14px; height: 20px; left: 307.52px; top: 353.39px;}
    #warped.heart #w41 {text-transform: uppercase; transform: rotate(-10.46rad); width: 5px; height: 20px; left: 301.4px; top: 371.64px;}
    #warped.heart #w42 {text-transform: uppercase; transform: rotate(-10.43rad); width: 10px; height: 20px; left: 288.24px; top: 388.69px;}
    #warped.heart #w43 {text-transform: uppercase; transform: rotate(-10.39rad); width: 10px; height: 20px; left: 275.76px; top: 407.35px;}
    #warped.heart #w44 {text-transform: uppercase; transform: rotate(-10.37rad); width: 9px; height: 20px; left: 263.86px; top: 424.69px;}
    #warped.heart #w45 {text-transform: uppercase; transform: rotate(-10.34rad); width: 10px; height: 20px; left: 251.25px; top: 440.64px;}
    #warped.heart #w46 {text-transform: uppercase; transform: rotate(-10.31rad); width: 10px; height: 20px; left: 237.23px; top: 458.08px;}
    #warped.heart #w47 {text-transform: uppercase; transform: rotate(-10.28rad); width: 10px; height: 20px; left: 222.34px; top: 475.52px;}
    #warped.heart #w48 {text-transform: uppercase; transform: rotate(-10.25rad); width: 12px; height: 20px; left: 205.59px; top: 492.9px;}
    #warped.unfold #w0 {text-transform: uppercase; transform: rotate(-0rad); width: 17px; height: 20px; left: 10px; top: 148px;}
    #warped.unfold #w1 {text-transform: uppercase; transform: rotate(-0rad); width: 12px; height: 20px; left: 25px; top: 148px;}
    #warped.unfold #w2 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 40px; top: 148px;}
    #warped.unfold #w3 {text-transform: uppercase; transform: rotate(-0rad); width: 14px; height: 20px; left: 55px; top: 148px;}
    #warped.unfold #w4 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 70px; top: 148px;}
    #warped.unfold #w5 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 85px; top: 148px;}
    #warped.unfold #w6 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 100px; top: 148px;}
    #warped.unfold #w7 {text-transform: uppercase; transform: rotate(-0rad); width: 5px; height: 20px; left: 115px; top: 148px;}
    #warped.unfold #w8 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 130px; top: 148px;}
    #warped.unfold #w9 {text-transform: uppercase; transform: rotate(-0rad); width: 5px; height: 20px; left: 145px; top: 148px;}
    #warped.unfold #w10 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 160px; top: 148px;}
    #warped.unfold #w11 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 175px; top: 148px;}
    #warped.unfold #w12 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 190px; top: 148px}
    #warped.unfold #w13 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 205px; top: 148px;}
    #warped.unfold #w14 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 220px; top: 148px;}
    #warped.unfold #w15 {text-transform: uppercase; transform: rotate(-0rad); width: 8px; height: 20px; left: 235px; top: 148px;}
    #warped.unfold #w16 {text-transform: uppercase; transform: rotate(-0rad); width: 5px; height: 20px; left: 250px; top: 148px;}
    #warped.unfold #w17 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 265px; top: 148px;}
    #warped.unfold #w18 {text-transform: uppercase; transform: rotate(-0rad); width: 5px; height: 20px; left: 280px; top: 148px;}
    #warped.unfold #w19 {text-transform: uppercase; transform: rotate(-0rad); width: 14px; height: 20px; left: 295px; top: 148px;}
    #warped.unfold #w20 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 310px; top: 148px;}
    #warped.unfold #w21 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 325px; top: 148px;}
    #warped.unfold #w22 {text-transform: uppercase; transform: rotate(-0rad); width: 9px; height: 20px; left: 340px; top: 148px;}
    #warped.unfold #w23 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 355px; top: 148px;}
    #warped.unfold #w24 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 370px; top: 148px;}
    #warped.unfold #w25 {text-transform: uppercase; transform: rotate(-0rad); width: 9px; height: 20px; left: 385px; top: 148px;}
    #warped.unfold #w26 {text-transform: uppercase; transform: rotate(-0rad); width: 8px; height: 20px; left: 400px; top: 148px;}
    #warped.unfold #w27 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 415px; top: 148px;}
    #warped.unfold #w28 {text-transform: uppercase; transform: rotate(-0rad); width: 11px; height: 20px; left: 430px; top: 148px;}
    #warped.unfold #w29 {text-transform: uppercase; transform: rotate(-0rad); width: 9px; height: 20px; left: 445px; top: 148px;}
    #warped.unfold #w30 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 460px; top: 148px;}
    #warped.unfold #w31 {text-transform: uppercase; transform: rotate(-0rad); width: 8px; height: 20px; left: 475px; top: 148px;}
    #warped.unfold #w32 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 490px; top: 148px;}
    #warped.unfold #w33 {text-transform: uppercase; transform: rotate(-0rad); width: 8px; height: 20px; left: 510px; top: 148px;}
    #warped.unfold #w34 {text-transform: uppercase; transform: rotate(-0rad); width: 9px; height: 20px; left: 525px; top: 148px;}
    #warped.unfold #w35 {text-transform: uppercase; transform: rotate(-0rad); width: 11px; height: 20px; left: 540px; top: 148px;}
    #warped.unfold #w36 {text-transform: uppercase; transform: rotate(-0rad); width: 9px; height: 20px; left: 555px; top: 148px;}
    #warped.unfold #w37 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 570px; top: 148px;}
    #warped.unfold #w38 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 585px; top: 148px;}
    #warped.unfold #w39 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 600px; top: 148px;}
    #warped.unfold #w40 {text-transform: uppercase; transform: rotate(-0rad); width: 14px; height: 20px; left: 615px; top: 148px;}
    #warped.unfold #w41 {text-transform: uppercase; transform: rotate(-0rad); width: 5px; height: 20px; left: 630px; top: 148px;}
    #warped.unfold #w42 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 645px; top: 148px;}
    #warped.unfold #w43 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 660px; top: 148px;}
    #warped.unfold #w44 {text-transform: uppercase; transform: rotate(-0rad); width: 9px; height: 20px; left: 675px; top: 148px;}
    #warped.unfold #w45 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 690px; top: 148px;}
    #warped.unfold #w46 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 705px; top: 148px;}
    #warped.unfold #w47 {text-transform: uppercase; transform: rotate(-0rad); width: 10px; height: 20px; left: 720px; top: 148px;}
    #warped.unfold #w48 {text-transform: uppercase; transform: rotate(-0rad); width: 12px; height: 20px; left: 735px; top: 148px;}
    #warped.question #w0 {text-transform: uppercase; transform: rotate(-8.4rad); width: 15px; height: 13px; left: 59.89px; top: 242.99px;}
    #warped.question #w1 {text-transform: uppercase; transform: rotate(-8.29rad); width: 12px; height: 13px; left: 53.02px; top: 227.22px;}
    #warped.question #w2 {text-transform: uppercase; transform: rotate(-8.19rad); width: 6px; height: 13px; left: 50.68px; top: 213.95px;}
    #warped.question #w3 {text-transform: uppercase; transform: rotate(-8.04rad); width: 18px; height: 13px; left: 40.38px; top: 197.66px;}
    #warped.question #w4 {text-transform: uppercase; transform: rotate(-7.84rad); width: 12px; height: 13px; left: 41.76px; top: 178.19px;}
    #warped.question #w5 {text-transform: uppercase; transform: rotate(-7.67rad); width: 6px; height: 13px; left: 46.27px; top: 164.04px;}
    #warped.question #w6 {text-transform: uppercase; transform: rotate(-7.5rad); width: 12px; height: 13px; left: 46.98px; top: 150.91px;}
    #warped.question #w7 {text-transform: uppercase; transform: rotate(-7.34rad); width: 5px; height: 13px; left: 56.19px; top: 138.85px;}
    #warped.question #w8 {text-transform: uppercase; transform: rotate(-7.18rad); width: 12px; height: 13px; left: 60.64px; top: 127.31px;}
    #warped.question #w9 {text-transform: uppercase; transform: rotate(-7.04rad); width: 5px; height: 13px; left: 73.28px; top: 117.58px;}
    #warped.question #w10 {text-transform: uppercase; transform: rotate(-6.94rad); width: 6px; height: 13px; left: 80.83px; top: 110.83px;}
    #warped.question #w11 {text-transform: uppercase; transform: rotate(-6.82rad); width: 12px; height: 13px; left: 89.21px; top: 103.27px;}
    #warped.question #w12 {text-transform: uppercase; transform: rotate(-6.68rad); width: 12px; height: 13px; left: 104.43px; top: 95.77px;}
    #warped.question #w13 {text-transform: uppercase; transform: rotate(-6.56rad); width: 11px; height: 13px; left: 120.45px; top: 90.48px;}
    #warped.question #w14 {text-transform: uppercase; transform: rotate(-6.45rad); width: 6px; height: 13px; left: 136.77px; top: 87.46px;}
    #warped.question #w15 {text-transform: uppercase; transform: rotate(-6.38rad); width: 5px; height: 13px; left: 147.42px; top: 86.18px;}
    #warped.question #w16 {text-transform: uppercase; transform: rotate(-6.31rad); width: 3px; height: 13px; left: 157.06px; top: 85.69px;}
    #warped.question #w17 {text-transform: uppercase; transform: rotate(-6.22rad); width: 12px; height: 13px; left: 165.09px; top: 85.98px;}
    #warped.question #w18 {text-transform: uppercase; transform: rotate(-6.1rad); width: 5px; height: 13px; left: 182.47px; top: 87.78px;}
    #warped.question #w19 {text-transform: uppercase; transform: rotate(-5.96rad); width: 18px; height: 13px; left: 191.62px; top: 91.89px;}
    #warped.question #w20 {text-transform: uppercase; transform: rotate(-5.76rad); width: 11px; height: 13px; left: 213.19px; top: 100.09px;}
    #warped.question #w21 {text-transform: uppercase; transform: rotate(-5.62rad); width: 6px; height: 13px; left: 226.43px; top: 107.37px;}
    #warped.question #w22 {text-transform: uppercase; transform: rotate(-5.48rad); width: 8px; height: 13px; left: 234.59px; top: 115.66px;}
    #warped.question #w23 {text-transform: uppercase; transform: rotate(-5.31rad); width: 12px; height: 13px; left: 242.06px; top: 127.35px;}
    #warped.question #w24 {text-transform: uppercase; transform: rotate(-5.14rad); width: 12px; height: 13px; left: 250.1px; top: 141.88px;}
    #warped.question #w25 {text-transform: uppercase; transform: rotate(-4.99rad); width: 8px; height: 13px; left: 257.18px; top: 156.07px;}
    #warped.question #w26 {text-transform: uppercase; transform: rotate(-4.89rad); width: 6px; height: 13px; left: 260.86px; top: 168.09px;}
    #warped.question #w27 {text-transform: uppercase; transform: rotate(-4.8rad); width: 6px; height: 13px; left: 262.24px; top: 179.06px;}
    #warped.question #w28 {text-transform: uppercase; transform: rotate(-11rad); width: 11px; height: 13px; left: 260.26px; top: 191.89px;}
    #warped.question #w29 {text-transform: uppercase; transform: rotate(-10.84rad); width: 12px; height: 13px; left: 258.59px; top: 211.18px;}
    #warped.question #w30 {text-transform: uppercase; transform: rotate(-10.55rad); width: 12px; height: 13px; left: 253.46px; top: 226.85px;}
    #warped.question #w31 {text-transform: uppercase; transform: rotate(-10.39rad); width: 7px; height: 13px; left: 248.3px; top: 239.65px;}
    #warped.question #w32 {text-transform: uppercase; transform: rotate(-10.29rad); width: 11px; height: 13px; left: 237.68px; top: 250.66px;}
    #warped.question #w33 {text-transform: uppercase; transform: rotate(-10.23rad); width: 9px; height: 13px; left: 228.6px; top: 261.71px;}
    #warped.question #w34 {text-transform: uppercase; transform: rotate(-10.2rad); width: 12px; height: 13px; left: 216.37px; top: 272.46px;}
    #warped.question #w35 {text-transform: uppercase; transform: rotate(-10.19rad); width: 11px; height: 13px; left: 204.95px; top: 283.86px;}
    #warped.question #w36 {text-transform: uppercase; transform: rotate(-10.19rad); width: 12px; height: 13px; left: 192.14px; top: 295.56px;}
    #warped.question #w37 {text-transform: uppercase; transform: rotate(-10.22rad); width: 12px; height: 13px; left: 180.3px; top: 307.15px;}
    #warped.question #w38 {text-transform: uppercase; transform: rotate(-10.25rad); width: 9px; height: 13px; left: 170.73px; top: 318.64px;}
    #warped.question #w39 {text-transform: uppercase; transform: rotate(-10.29rad); width: 6px; height: 13px; left: 163.94px; top: 327.95px;}
    #warped.question #w40 {text-transform: uppercase; transform: rotate(-10.36rad); width: 18px; height: 13px; left: 147.66px; top: 340.84px;}
    #warped.question #w41 {text-transform: uppercase; transform: rotate(-10.45rad); width: 3px; height: 13px; left: 146.41px; top: 353.76px;}
    #warped.question #w42 {text-transform: uppercase; transform: rotate(-10.53rad); width: 11px; height: 13px; left: 136.5px; top: 364.31px;}
    #warped.question #w43 {text-transform: uppercase; transform: rotate(-10.66rad); width: 12px; height: 13px; left: 129.44px; top: 379.65px;}
    #warped.question #w44 {text-transform: uppercase; transform: rotate(-10.82rad); width: 12px; height: 13px; left: 125.12px; top: 395.87px;}
    #warped.question #w45 {text-transform: uppercase; transform: rotate(-10.98rad); width: 12px; height: 13px; left: 123.41px; top: 413.05px;}
    #warped.question #w46 {text-transform: uppercase; transform: rotate(-4.84rad); width: 9px; height: 13px; left: 125.76px; top: 428.28px;}
    #warped.question #w47 {text-transform: uppercase; transform: rotate(-4.97rad); width: 11px; height: 13px; left: 127.52px; top: 442.74px;}
    #warped.question #w48 {text-transform: uppercase; transform: rotate(-5.08rad); width: 8px; height: 13px; left: 133.53px; top: 457.06px;}

  </style>

  <template>
    <div id="warped" class="heart">
      <paper-ripple></paper-ripple>
      <span id='w0'>O</span><span id='w1'>h</span><span id='w2'> </span><span id='w3'>m</span><span id='w4'>a</span><span id='w5'> </span><span id='w6'>n</span><span id='w7'>i</span><span id='w8'>n</span><span id='w9'>i</span><span id='w10'> </span><span id='w11'>q</span><span id='w12'>u</span><span id='w13'>e</span><span id='w14'> </span><span id='w15'>j</span><span id='w16'>'</span><span id='w17'>a</span><span id='w18'>i</span><span id='w19'>m</span><span id='w20'>e</span><span id='w21'> </span><span id='w22'>t</span><span id='w23'>a</span><span id='w24'>n</span><span id='w25'>t</span><span id='w26'>,</span><span id='w27'> </span><span id='w28'>v</span><span id='w29'>o</span><span id='w30'>u</span><span id='w31'>l</span><span id='w32'>e</span><span id='w33'>z</span><span id='w34'>-</span><span id='w35'>v</span><span id='w36'>o</span><span id='w37'>u</span><span id='w38'>s</span><span id='w39'> </span><span id='w40'>m</span><span id='w41'>'</span><span id='w42'>é</span><span id='w43'>p</span><span id='w44'>o</span><span id='w45'>u</span><span id='w46'>s</span><span id='w47'>e</span><span id='w48'>r</span>
    </div>
  </template>
</dom-module>

<script>
  Polymer({
    is: "dyw-cesarheart",
    listeners : {
      "tap" :"switchStyle"
    },
    properties:{
      msg: {type: Array, observer: "refreshDom"},
      key: {type: String, value: "", observer: "keyChanged"}
    },
    ready : function(){
      this.msg = "DH XA ZIAL YHG W'PIGP KMNG, DBWPRS-VIFS Y'RSJCFGV".split("");
      this._msgback = this.msg;
    },
    switchStyle : function(){
      if(Polymer.dom(this.$.warped).classList.contains("heart")){
        this.toggleClass("heart", false, this.$.warped);
        this.toggleClass("question", true, this.$.warped);
      }else{
        this.toggleClass("heart", true, this.$.warped);
        this.toggleClass("question", false, this.$.warped);
      }
      this.key = "PAULARMANDVINCENT";
    },
    refreshDom : function(){
      for(var iter = 0; iter <= 48; iter++){
        Polymer.dom(this.$["w"+iter]).innerHTML = this.msg[iter];
      }
    },
    keyChanged : function(){
      if(this.key.length <= 0)
        return;
      for(var iter = 0; iter <= 48; iter++){
        this._moveLetter(iter,this.key[iter%this.key.length]);
      }
      this.refreshDom();
    },
    _moveLetter : function(idxLetter, letterToAdd){
      var currentText = this._msgback[idxLetter].toUpperCase();
      var letterToAddVal = letterToAdd.toUpperCase().charCodeAt(0);
      var shift = letterToAddVal - 65;
      shift = (26 - shift) % 26;
      if( shift >= 0 && shift < 26){
        this.msg[idxLetter] = this._caesarShift(currentText, shift);
      }
    },
    _caesarShift : function (text, shift) {
      var result = "";
      for (var i = 0; i < text.length; i++) {
          var c = text.charCodeAt(i);
          if      (c >= 65 && c <=  90) result += String.fromCharCode((c - 65 + shift) % 26 + 65);  // Uppercase
          else if (c >= 97 && c <= 122) result += String.fromCharCode((c - 97 + shift) % 26 + 97);  // Lowercase
          else                          result += text.charAt(i);  // Copy
      }
      return result;
    }
  });
</script>
